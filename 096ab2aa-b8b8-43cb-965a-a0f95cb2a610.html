<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Git 学习笔记 - Zji</title>
  <link rel="stylesheet" href="github-markdown.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="atom-one-dark.min.css">
</head>
<body class="markdown-body">
  <main>
    <article>
      <h1 class="note-title">Git 学习笔记</h1>
      <section><h2 id="%E5%BC%95%E5%AD%90">引子</h2><p>对于 git 我尝试学习过很多次，但，没学会。因为我需求不高，用的很少，也记不住……更多的是看教程的时候就已经被绕迷糊了。</p>
<p>这次借着汉化 git 速查表的机会，我又尝试重新学习，然后发现了以前没有注意到的细节，然后一切都变得简单了。</p>
<p>望此文可以帮助其他和我一样曾经被绕昏的小可爱们。</p>
<h2 id="%E8%AF%B4%E6%98%8E">说明</h2><p>接下来我要讲的东西很可能你在其他教程中看了无数遍，毕竟知识终究还是那些，我只是换了一种描述方式，让你更直观的去了解。所以，请不要因为自己看过而跳读。</p>
<p>以及，如果你毫无经验，这篇可能不太适合入门，但你慢慢读，还是能帮助理清头绪，再读其他文档会好懂的多。</p>
<h2 id="%E5%9B%9B%E7%A7%8D%E7%8A%B6%E6%80%81">四种状态</h2><p>我们创建一个新文件，默认 git 是不会管它的，因为此文件未被 git 跟踪（track），这文件爱怎样怎样，和我 git 有什么关系。</p>
<p>对应的，当然有已经被跟踪（tracked）的文件，这些文件又分为：未被修改的、已经修改的。这都是相对于上一次提交而言的。</p>
<p>修改以后的文件可以暂存（Stage），这是一个预备提交，但尚未提交的状态。</p>
<p><strong>【说重点】</strong>：这区分的太细了，对于初学者来说，很难一下子分清楚，所以<strong>比如 Github Desktop 这种客户端，就非常新人友好的简化了这个操作，勾选未跟踪或者已修改的文件，然后直接提交</strong>。（这很好，但这导致用惯了客户端的人更不容易理清……）</p>
<h2 id="%E7%AD%89%E7%AD%89%EF%BC%81%EF%BC%81%EF%BC%81">等等！！！</h2><p>我们为什么用 git？为了版本管理，说白了就是我文件修改了之后还能找回以前的版本。但这个找回操作分几种可能：找回早期版本，找回近期刚操作的内容，找回全部文件，找回某个特定文件。</p>
<p>总之，<mark>就是让文件在不同的版本或者状态间流转</mark>。所以，我<strong>要学的最基础的内容就两件事情：怎么保存文件的状态，怎么取回某一时间点文件的状态</strong>。</p>
<p>意识到这一点，问题就简单了，我甚至不需要过多理解什么，只要知道当前文件出于什么状态，我想要的东西在哪里（仓库、版本），然后查询对应的命名，就行了。所以，我需要的速查表是什么——从这儿到那儿，用哪个命令。</p>
<h2 id="%E5%9B%9B%E7%A7%8D%E7%8A%B6%E6%80%81%EF%BC%88%E9%80%9F%E6%9F%A5%E8%A1%A8%EF%BC%89">四种状态（速查表）</h2><pre class="hljs-code-block"><code class="hljs mermaid" lang="mermaid">sequenceDiagram
  box rgb(224,236,212) Working Directory<br>工作目录
    participant UT as Untracked<br>(未跟踪)
  end
  box rgb(255,251,221) Tracked<br>已跟踪
    participant UM as Unmodified<br>(未修改)
    participant M as Modified<br>(已修改)
    participant S as Staged<br>(已暂存)
  end
  box rgb(255,218,217) Repository<br>仓库
    participant C as Commited<br>(已提交)
  end

  Note left of UM: git clone $URL  --->
  Note left of UT: 新建文件 --->
  UT ->> S: git add $FILE
  S ->> C: git commit -m "commit message"

  S ->> UT: git rm --cached $FILE

  C ->> M: 编辑文件
  M ->> S: git add $FILE
  S ->> M: git reset HEAD $FILE

  UM ->> M: 编辑文件
  M ->> UM: git checkout -- $FILE</code></pre><p>如果你稍微有点基础，应该就能发现，这很方便，确实可以速查。我整理到这里的时候也开心的直转圈圈。</p>
<h2 id="%E5%9B%9B%E7%A7%8D%E5%B7%A5%E4%BD%9C%E5%8C%BA">四种工作区</h2><pre class="hljs-code-block"><code class="hljs mermaid" lang="mermaid">sequenceDiagram

participant W as WorkSpace<br>(工作区)
participant I as Index<br>(暂存区)
participant L as Local<br>Repository<br>(本地仓库)
participant R as Remote<br>Repository<br>(远端仓库)

W ->> I: git add $FILE
I ->> L: git commit -m "commit message"
L ->> R: git push

R ->> W: git pull<br>git clone $URL
R ->> L: git fetch
L ->> W: git checkout HEAD
I ->> W: git checkout -- $FILE</code></pre><h2 id="%E4%BD%86%E6%98%AF%E5%B9%B6%E6%B2%A1%E7%BB%93%E6%9D%9F">但是并没结束</h2><p>真的，我觉得这么多足够我用了，其实很多我都用不上的。但是，上面这两个图虽然和网络上很多图表十分类似，但是这不只是重绘，我是在用心整理的。不不，我不是让你夸我。我是说——我发现了问题。</p>
<ul>
<li>下方工作区（WorkSpace）约等于上方“未跟踪”、“未修改”、“已修改”三种状态的合集；</li><li>Index 约等于已暂存。</li><li>下方描述的是让文件从一个工作区到另一个工作区，上方描述的是从一个状态到另一个状态。这就导致同样的命令在不同图表中连接的位置不同。比如：</li><li><code class="inline-code">git reset HEAD</code> 是将暂存区的文件恢复到最新一次提交，可以理解为让文件从本地仓库（Local Repository）到暂存区（Index）</li><li>但是既然 Staged（已暂存）的内容和最新提交没有差异，所以其实 Staged（已暂存）被清空了。但是这个操作并不影响工作区中已经修改的文件内容。所以也可以理解为将原本放入 Staged（已暂存）的文件给取消暂存了。</li><li><strong>能理解此差异，就能读懂网络上各种相关图表了</strong>。因为太多时候他们只说从什么到什么用 xx 命令，但你多看两篇就发现，完全相同的命令被用在了不同的操作上，然后迷惑。</li></ul>
<h2 id="%E7%BB%A7%E7%BB%AD%E6%8E%A8%E6%BC%94">继续推演</h2><p>一些操作，是针对某个状态/工作区的，比如上图中 <code class="inline-code">git checkout</code> 命令都指向了 WorkSpace，那我合理猜测，它其实就是把工作区恢复到某一状态，而差异在于要从什么地方拿到这一状态。</p>
<h2 id="%E8%BF%99%E5%B0%B1%E5%A4%9F%E4%BA%86">这就够了</h2><p>上次整理的速查表一共也就二十多条指令，有一些是原本就会的，比如 <code class="inline-code">clone</code>、<code class="inline-code">add</code>、<code class="inline-code">commit</code>、<code class="inline-code">push</code>……一些个是一看就懂的，比如 <code class="inline-code">status</code>、<code class="inline-code">log</code>，剩下一些按着上面的方法抓准指令的目标是谁，用来让文件从哪儿到哪儿，问题已经变得十分简单了。</p>
</section>
    </article>
  </main>
  <aside id="side-menu">
    <div class="toggle"><i class="fa-solid fa-bars"></i></div>
    <div class="aside-content">
      <div class="nav">
        <ul>
          <li class="home"><a href="/">Home</a></li>
          <li class="changelogs"><a href="/changelogs">Changelogs</a></li>
          <!-- <li class="coffee"><a href="https://afdian.net/a/daomishu" target="_blank">Coffee~ <i class="fa-solid fa-coffee"></i></a></li> -->
          <li class="gotop"><a href="#">Top</a></li>
        </ul>
      </div>
      <a class="coffee" href="https://afdian.net/a/daomishu" target="_blank" title="嘿，朋友！给我一杯咖啡~是的，是的，用来开启一天工作的咖啡~那玩意儿简直是我工作的电源。怎么样，难道你不期待我多鼓捣出一点奇奇怪怪的有趣儿玩意儿吗？">Buy me a Coffee~ <i class="fa-solid fa-coffee"></i></a>
      <div class="toc"><ul><li data-hash="%E5%BC%95%E5%AD%90" style="margin-left: 1.5em"><a href="#%E5%BC%95%E5%AD%90">引子</a></li>
<li data-hash="%E8%AF%B4%E6%98%8E" style="margin-left: 1.5em"><a href="#%E8%AF%B4%E6%98%8E">说明</a></li>
<li data-hash="%E5%9B%9B%E7%A7%8D%E7%8A%B6%E6%80%81" style="margin-left: 1.5em"><a href="#%E5%9B%9B%E7%A7%8D%E7%8A%B6%E6%80%81">四种状态</a></li>
<li data-hash="%E7%AD%89%E7%AD%89%EF%BC%81%EF%BC%81%EF%BC%81" style="margin-left: 1.5em"><a href="#%E7%AD%89%E7%AD%89%EF%BC%81%EF%BC%81%EF%BC%81">等等！！！</a></li>
<li data-hash="%E5%9B%9B%E7%A7%8D%E7%8A%B6%E6%80%81%EF%BC%88%E9%80%9F%E6%9F%A5%E8%A1%A8%EF%BC%89" style="margin-left: 1.5em"><a href="#%E5%9B%9B%E7%A7%8D%E7%8A%B6%E6%80%81%EF%BC%88%E9%80%9F%E6%9F%A5%E8%A1%A8%EF%BC%89">四种状态（速查表）</a></li>
<li data-hash="%E5%9B%9B%E7%A7%8D%E5%B7%A5%E4%BD%9C%E5%8C%BA" style="margin-left: 1.5em"><a href="#%E5%9B%9B%E7%A7%8D%E5%B7%A5%E4%BD%9C%E5%8C%BA">四种工作区</a></li>
<li data-hash="%E4%BD%86%E6%98%AF%E5%B9%B6%E6%B2%A1%E7%BB%93%E6%9D%9F" style="margin-left: 1.5em"><a href="#%E4%BD%86%E6%98%AF%E5%B9%B6%E6%B2%A1%E7%BB%93%E6%9D%9F">但是并没结束</a></li>
<li data-hash="%E7%BB%A7%E7%BB%AD%E6%8E%A8%E6%BC%94" style="margin-left: 1.5em"><a href="#%E7%BB%A7%E7%BB%AD%E6%8E%A8%E6%BC%94">继续推演</a></li>
<li data-hash="%E8%BF%99%E5%B0%B1%E5%A4%9F%E4%BA%86" style="margin-left: 1.5em"><a href="#%E8%BF%99%E5%B0%B1%E5%A4%9F%E4%BA%86">这就够了</a></li></ul></div>
      <div class="meta"><small>created: 2024-06-19 12:51:36</small><br><small>updated: 2024-06-19 13:37:54</small></div>
    </div>
  </aside>
  <script src="script.js"></script>
  <foot>©2022~2024 稻米鼠. Last build at 2024-06-20 00:00:24</foot>
<script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>