<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>复式记账的折腾与思考 - Zji</title>
  <link rel="stylesheet" href="github-markdown.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="atom-one-dark.min.css">

</head>
<body>
  <main>
    <article class="markdown-body">
      <h1 class="note-title">复式记账的折腾与思考</h1>
      <section><p>认真地理了一下时间线，我掉进复式记账这个坑大概十天了，大概的路线图：</p>
<ul>
<li>过去的记账开始混乱，难以接受</li><li>去了解复式记账，觉得适合自己</li><li>找记账工具，被无数人异口同声的推荐 Beancount</li><li>去理解 Beancount 的设计哲学</li><li>搞适合自己的记账工具</li></ul>
<h2 id="%E6%88%91%E7%9C%BC%E9%87%8C%E7%9A%84%E5%A4%8D%E5%BC%8F%E8%AE%B0%E8%B4%A6">我眼里的复式记账</h2><p>前两条在上一篇 <a href="0f46def2-4a6d-48f3-82bc-c0c1342cac51.html" title="我的复式记账">我的复式记账</a> 已经讲了。这里做个极致的简化示例。如果我认为一切皆转账，那么每个交易交易都可以提炼为如下记录：</p>
<pre class="hljs">2023<span class="hljs-string">-12</span><span class="hljs-string">-23</span> &quot;淘宝&quot; &quot;买一大堆零食&quot;
    支付宝        <span class="hljs-string">-128</span>.00
    食物          <span class="hljs-string">+128</span>.00</pre><p>时间，平台（收款人），做了什么；哪个账户支出的，消费到了哪个分类（这个分类账户的数值增加）。文本存储的复式记账大概都是类似格式，比如 Beancount 里面：</p>
<pre class="hljs beancount" lang="beancount"><span class="hljs-number">2023</span><span class="hljs-number">-12</span><span class="hljs-number">-23</span> * <span class="hljs-string">&quot;淘宝&quot;</span> <span class="hljs-string">&quot;买一大堆零食&quot;</span>
    支付宝        <span class="hljs-number">-128.00</span> <span class="hljs-built_in">CNY</span>
    食物          +<span class="hljs-number">128.00</span> <span class="hljs-built_in">CNY</span></pre><p>多了个星号，表示确定的交易，我记录的所有交易都是确定的，在我看来这跟固定格式差不多了。然后每个数值后面写上货币单位，但我几乎只花人民币，这也跟固定格式差不多了。</p>
<p>好了，够用了，我就一点简单的小账目，这一种格式就足以满足我所有的需求了。</p>
<h2 id="Beancount">Beancount</h2><p>太多人给我推荐了，甚至不同时间点反复向我推荐，谢谢大家。我很认真的去学习了，但不能说很适合我。</p>
<h3 id="%E4%BD%9C%E8%80%85%E7%9A%84%E5%93%B2%E5%AD%A6">作者的哲学</h3><p>把和交易相关的所有事情放在时间轴上，这样在回头阅读的时候，一切都一目了然了。这和时间轴手账的思路非常像。但我好像，并不是很需要，我已经有日记了，账目这边不想再重复记一遍。</p>
<p>但这并不是什么问题，用不到的功能忽略就可以了，讲这点是因为和我后面的客制化有关。</p>
<h3 id="%E4%BD%9C%E8%80%85%E7%9A%84%E5%9C%BA%E6%99%AF">作者的场景</h3><p>作者是基于账单的输入的，隔一段时间，将各种账户的账单拿来导入进去，然后补充一些备注信息，平一下账，看看报表，了解自己的财务状况。</p>
<p>我是交易一笔记录一笔，我交易很少很少的，可能几天一条，但是有些细碎的我又很想写清楚，比如日后看微信账单向 xxx（人名） 付款，我不认识这个人，我只知道这应该是跟某个小贩购物的付款，但是买什么来着……所以当时记下来才不会忘记。</p>
<h3 id="%E6%89%8B%E6%9C%BA%E4%B8%8A%E7%9A%84%E9%9C%80%E6%B1%82">手机上的需求</h3><p>按着作者的使用方法，那电脑端足够用了。但按着我的习惯，最好我闲暇时光对着手机就能随手把刚才的花销给记录一下。</p>
<p>也没问题，Beancount 提供了一个 web 服务，fava。启动以后，在电脑或者手机的浏览器里都能查看各种报表和记账。</p>
<p>但我当做 Nas 用的那个上网本……跑不起来，好难过！</p>
<h2 id="%E6%88%91%E7%9A%84%E6%80%9D%E8%B7%AF">我的思路</h2><p>我需要什么？记流水账，可以看看自己当前账户余额，汇总信息，近期交易，和各种账单对对账（手动）。大概也就这么多，要求不高嘛。</p>
<p>Beancount 如果只用最基础的记账语法，那文件格式也非常简单的。不如我自己写个小工具，满足我在移动端的需求。</p>
<p>Obsidian，就塞这里面吧！这里有一点重要的细节：Beancount 的 fava 并不介意账本文件的后缀，Obsidian 的插件 Dataview 的 <code>dv.io.load</code> 方法也不介意读取的文件后缀。所以我的账本文件可以是任意后缀，bean 或者 md 或者什么其他的都没问题。</p>
<p>然后做了，而且够用，挺满意的。记账的时候可以通过提示快速输入时间、收款人、各种账户、币种、注释，在移动端基本满意了。</p>
<h2 id="%E5%85%B6%E4%B8%AD%E7%9A%84%E7%BA%A0%E7%BB%93">其中的纠结</h2><p>写的时候其实很纠结的，到底对 beancount 的语言支持到什么程度好呢，于是就去读 beancount 的文档，去理解作者的思路。然后碾转反侧一夜，终于想通了——</p>
<p>我要搞的是个我自己用的工具，而不一定非要明确和它之间的关系，不如说我借用了它的某些语法（站在巨人肩膀上），然后解决自己的问题。</p>
<p>于是想通了，所以我写的这个工具就只支持最基本的记账语句。但额外的，可以显示出每个账户变动后面的注释内容，因为我需要这个。</p>
<p>把事情想通，其实比写个好用的工具对我的意义更大，因为以后不会在这个问题上反复纠结了，就畅快。</p>
<h2 id="%E4%B8%8B%E4%B8%80%E6%AD%A5">下一步</h2><p>如果写嗨了，这个小工具也许放出来，但需要完善的东西还挺多的。</p>
<p>如果人摸了，抱着数据退回到 beancount，完全无痛，因为就是一样的格式。</p>
<p>话说 bean 的读音好像是“笨”，count 大概可以翻译成“数”（三声，动词）……“笨鼠”？！</p>
</section>
    </article>
  </main>
  <aside>
    <div class="toggle"><i class="fa-solid fa-bars"></i></div>
    <div class="aside-content">
      <div class="nav">
        <ul>
          <li class="home"><a href="/"><i class="fa-solid fa-house"></i> Home</a></li>
          <li class="meow"><a href="https://afdian.net/a/daomishu" target="_blank"><i class="fa-solid fa-heart"></i> Meow~</a></li>
          <li class="gotop"><a href="#"><i class="fa-solid fa-plane-up"></i> Top</a></li>
        </ul>
      </div>
      <div class="toc"><ul><li data-hash="%E6%88%91%E7%9C%BC%E9%87%8C%E7%9A%84%E5%A4%8D%E5%BC%8F%E8%AE%B0%E8%B4%A6" style="margin-left: 1.5em"><a href="#%E6%88%91%E7%9C%BC%E9%87%8C%E7%9A%84%E5%A4%8D%E5%BC%8F%E8%AE%B0%E8%B4%A6">我眼里的复式记账</a></li>
<li data-hash="Beancount" style="margin-left: 1.5em"><a href="#Beancount">Beancount</a></li>
<li data-hash="%E4%BD%9C%E8%80%85%E7%9A%84%E5%93%B2%E5%AD%A6" style="margin-left: 3em"><a href="#%E4%BD%9C%E8%80%85%E7%9A%84%E5%93%B2%E5%AD%A6">作者的哲学</a></li>
<li data-hash="%E4%BD%9C%E8%80%85%E7%9A%84%E5%9C%BA%E6%99%AF" style="margin-left: 3em"><a href="#%E4%BD%9C%E8%80%85%E7%9A%84%E5%9C%BA%E6%99%AF">作者的场景</a></li>
<li data-hash="%E6%89%8B%E6%9C%BA%E4%B8%8A%E7%9A%84%E9%9C%80%E6%B1%82" style="margin-left: 3em"><a href="#%E6%89%8B%E6%9C%BA%E4%B8%8A%E7%9A%84%E9%9C%80%E6%B1%82">手机上的需求</a></li>
<li data-hash="%E6%88%91%E7%9A%84%E6%80%9D%E8%B7%AF" style="margin-left: 1.5em"><a href="#%E6%88%91%E7%9A%84%E6%80%9D%E8%B7%AF">我的思路</a></li>
<li data-hash="%E5%85%B6%E4%B8%AD%E7%9A%84%E7%BA%A0%E7%BB%93" style="margin-left: 1.5em"><a href="#%E5%85%B6%E4%B8%AD%E7%9A%84%E7%BA%A0%E7%BB%93">其中的纠结</a></li>
<li data-hash="%E4%B8%8B%E4%B8%80%E6%AD%A5" style="margin-left: 1.5em"><a href="#%E4%B8%8B%E4%B8%80%E6%AD%A5">下一步</a></li></ul></div>
      <div class="meta"><small>created: 2023-12-21 19:27:30</small><br><small>updated: 2023-12-23 13:50:09</small></div>
    </div>
  </aside>
  <script src="script.js"></script>
  <script async
    src="https://state.zji.me/script.js"
    data-website-id="746d3aee-45c2-4dea-b72f-0cfb7891afe3"
    data-do-not-track="true"
    data-domains="zji.me"></script>
  <foot>©2022~2024 稻米鼠. Last build at 2024/3/6 00:00:25</foot>
</body>
</html>