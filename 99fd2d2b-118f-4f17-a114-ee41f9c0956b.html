<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>碎碎念 step by step - Zji</title>
  <link rel="stylesheet" href="github-markdown.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="atom-one-dark.min.css">

</head>
<body>
  <main>
    <article class="markdown-body">
      <h1 class="note-title">碎碎念 step by step</h1>
      <section><h2 id="%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">第一步：数据结构</h2><p>你的数据想要存储成什么样子，那么看一下我用的格式：</p>
<pre class="hljs md" lang="md"><span class="hljs-bullet">- </span>碎碎念的内容 ➕ 这一条添加的时间 ^blockID</pre><p>解析如下：</p>
<ul>
<li>短划线开头，表明这是一个列表项，列表项也可以用星号开头，不过我习惯用短划线。</li><li>既然是列表项，就意味着不能使用复杂的格式，更类似于早期 140 字的微博。</li><li>➕ 不是随便使用的，是一些插件也支持用这个符号来标记任务中的添加时间（但这些插件只支持日期，不带时间部分）</li><li>blockID 是一串字母数字的组合，来标记这个位置，方便链接到这里。</li></ul>
<p>看一下实际应用效果：</p>
<pre class="hljs md" lang="md">- 非常简陋的私人微博 ➕ <span class="hljs-number">2023-11-17</span> <span class="hljs-number">10</span>:<span class="hljs-number">20</span>:<span class="hljs-number">03</span> ^Digu<span class="hljs-number">1700187603078</span></pre><h2 id="%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E7%A1%AE%E5%AE%9A%E5%AD%98%E5%82%A8">第二步：确定存储</h2><p>我存储在 <code>Life/Logs</code> 文件夹下，因为碎碎念的数量并不多，并且是以列表形式存储，所以我把一年的碎碎念都放在同一个文件内。如：<code>Life/Logs/2023.md</code></p>
<p>当然你可以选择按月份、按日期等方式存储。</p>
<h2 id="%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E8%AE%BE%E7%BD%AE%20QuickAdd">第三步：设置 QuickAdd</h2><p><strong>注意</strong>：QuickAdd 弹出的输入框在你按下 Esc 按键时会直接消失，导致未保存的数据丢失，留意一下这个细节就好。</p>
<p>进入 QuickAdd 之后开启 <code>Use Multi-line Input Prompt</code>，多行输入框是很适合用来碎碎念的，但这是一个全局设定，日后有多条 QuickAdd 动作之后可以考虑这个设定的取舍。</p>
<p>然后我们开始添加 Capture。这里说一个小技巧，QuickAdd 的设置中排版有点误导理解，你把窗口宽度调窄一点，忽然就变得好懂了。大概是这样的结构：</p>
<p><img src="edafb46e-0862-4099-8666-96d66217dee7.jpeg" alt=""></p>
<ul>
<li>按钮：Manage Macros —— 显然这不是我们需要的</li><li>输入框：Name —— 输入一个名字</li><li>下拉选框：Template —— 默认选择 Template 的选择框，点一下，看到四个选项，先不追求弄懂，我们就先选择 Capture</li><li>按钮：Add Choice —— 到这里忽然就理解了，第一个按钮和我们无关。然后取个名字，选择类型，点击这个按钮添加。</li></ul>
<p>添加以后上面就出现了这个名字的内容，后面有五个图标：闪电、齿轮、两个方框、垃圾桶、三根横线，这些图标应该能够理解个大概，我们点亮闪电（用途后面讲解），然后点击齿轮图标进行设置。</p>
<p>依旧是设置界面有点乱，你得先仔细分清每一项才好理解。</p>
<ul>
<li><code>Capture to active file</code> 捕获到当前文件中，显然不是我们希望的，所以这项应该关掉</li><li><code>File Name</code> 你希望捕获到的文件路径，这里支持一些特殊变量，可以到这里查询： <a href="https://quickadd.obsidian.guide/docs/FormatSyntax" title="https://quickadd.obsidian.guide/docs/FormatSyntax">https://quickadd.obsidian.guide/docs/FormatSyntax</a> ，我们填写： <code>Life/Logs/{{DATE:YYYY}}</code>，这里我省略了文件末尾的 <code>.md</code>，也可以写上。<code>{{DATE:YYYY}}</code> 代表了日期，具体格式用四位数年份。</li><li><code>Create file if it doesn&#39;t exist</code> 如果不存在这个文件就创建它，这项打开，这样到了明年就能自动创建文件了，无缝跨年。</li><li><code>Create file with given template.</code> 用给定的模板来创建新文件，这一项我没开，因为我懒得再去写个模板了。</li><li><code>Task</code> 以任务形式添加，这个关掉</li><li><code>Write to bottom of file</code> 内容添加到文件末尾，这个我关了，因为我希望新添加的内容在最顶部。但这样会导致后面的设置稍微复杂一点</li><li><code>Append link</code> 追加链接，这个我们不需要</li><li><code>Insert after</code> 我们不添加到文件底部，那默认就会添加到文件顶部，但是文件顶部有 front matter（就是文档属性）的内容，这样就混乱了，所以就需要设置一下这里，开启此项后会新增几个选项，我们逐个看：<ul>
<li>输入框，在什么之后插入，这里需要给它一个特定的内容用来定位。我是在那个碎碎念文件（<code>Life/Logs/2023.md</code>）的开始加了一个二级标题，所以这里填写 <code>## 碎碎念\n</code>， <code>\n</code> 代表了一个换行，但其实这里写两个换行最合适，然而它不支持，写一个 OK，写两个它就搞错。</li><li><code>Insert at end of section</code> 在这个章节的末尾插入，显然这不是我们想要的，就不要打开</li><li><code>Consider subsections</code> 考虑分段，这是高级格式，反正我们不需要</li><li><code>Create line if not found</code> 如果没找到这行（用来定位的内容），则创建。我们在什么时候会遇到这种情况呢，就是到明年，程序自动新建 2024 年的碎碎念文件，这时候是个空白文件，没有定位用的标题行，那它自动创建就省得我写模板了，而且因为那时候还完全是空白文件，这一行插入在上面下面都没所谓，不过为了避免和 front matter 冲突，我们选择插入在末尾。所以开启，后面选项选择 <code>bottom</code></li><li><code>Open</code> 插入内容之后是否打开这个文件，应该不需要吧，所以关掉就好。</li><li><code>Capture format</code> 捕获格式，这个要开启，我们自己定义好每一条的具体格式。</li></ul>
</li></ul>
<p>格式这里应该比较容易写出来：</p>
<pre class="hljs md" lang="md"><span class="language-xml">- </span><span class="hljs-template-variable">{{<span class="hljs-name">value</span>}}</span><span class="language-xml"> ➕ </span><span class="hljs-template-variable">{{<span class="hljs-name">date</span>}}</span><span class="language-xml"> </span><span class="hljs-template-variable">{{<span class="hljs-name">time</span>}}</span><span class="language-xml"> ^Digu</span><span class="hljs-template-variable">{{<span class="hljs-name">DATE:x</span>}}</span></pre><p><code></code> 代表我们输入的内容，<code>{{DATE:x}}</code>，代表毫秒级的时间戳，如果写成大写的 X 则是秒级的时间戳，都可以。</p>
<p>但是这样并不完美，因为我们前面说了，标题后面加两个换行再写新内容比较合适，结果定位的时候只允许我们写一个换行，这样用起来会标题和列表连在一起，不好看。所以要把这缺少的换行补充在这条格式里。</p>
<pre class="hljs md" lang="md"><span class="language-xml">
- </span><span class="hljs-template-variable">{{<span class="hljs-name">value</span>}}</span><span class="language-xml"> ➕ </span><span class="hljs-template-variable">{{<span class="hljs-name">date</span>}}</span><span class="language-xml"> </span><span class="hljs-template-variable">{{<span class="hljs-name">time</span>}}</span><span class="language-xml"> ^Digu</span><span class="hljs-template-variable">{{<span class="hljs-name">DATE:x</span>}}</span></pre><p>就是在上面加了一个空行。这里先照抄就行，熟悉了再尝试理解。然后保存就好了。</p>
<h2 id="%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E4%BD%BF%E7%94%A8">第四步：使用</h2><p>按下 <kbd class=key-ctrl>Ctrl</kbd> + <kbd class=key-p>P</kbd> ，就会弹出命令面板，输入 QuickAdd（不用输入全，一般写个 QA 就行了，不区分大小写），就会列出 QuickAdd 的全部命令了。其中<code>QuickAdd:</code> 表示这个命令来自 QuickAdd 这个插件，<code>Run QuickAdd</code> 是主命令，选择这个，就会列出你在 QuickAdd 中添加的所有动作了，然后选择使用。</p>
<p>显然上面的比较繁琐，而且刚才你在筛选命令的时候应该也看到了：<code>QuickAdd: [你取的名字]</code> 这么一条命令，选择这个就就可以执行刚才设定的 Capture 了。而这条之所以会出现在这里，是因为我们点亮了那个闪电图标，如果没有点亮则不会列在命令面板中。</p>
<p>当然，还是麻烦。进入设置，快捷键，右上角搜索框输入 <code>QuickAdd</code>，是不是就看到刚才那条命令了，给它设置一个快捷键，比如： <kbd class=key-ctrl>Ctrl</kbd> + <kbd class=key-q>Q</kbd>，于是你就可以随时在 Obsidian 中按下这个快捷键，然后开始碎碎念了。</p>
<p>到这里，用 QuickAdd 添加碎碎念的教程就结束了。但碎碎念之路……怎么可能到此完结呢（</p>
<h2 id="%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E5%B0%B1%E5%BE%AE%E5%8D%9A">第五步：就微博</h2><p>去爱发电下载附件，解压，找到里面的 <code>Dataview/Pages/DiguDigu</code> 文件夹，整个放到你的仓库里，爱放哪里放哪里……那里面有个使用说明，然后你需要安装 Dataview 插件，这个弄好之后就可以获得我在群里炫耀的那个微博界面了。</p>
<h2 id="%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E6%9C%89%E6%8A%80%E5%B7%A7">第六步：有技巧</h2><p>前面说过 QuickAdd 那个输入框容易丢数据，那最好的方法就是写好内容复制了，打开输入框，粘贴进去，提交。就不优雅！</p>
<p>仔细看前面给的那个变量的参考链接 <code></code> 代表的是什么呢？当然是输入框的内容，但如果在当前编辑器中有文字内容被选中，则用选中内容作为该值。也就是说，你先在随意笔记里写好，选中，一按快捷键，内容就添加到碎碎念里去了。</p>
<p>第五步中的那个视图是会缓存未提交的内容的，比较安全。</p>
<h2 id="%E7%AC%AC%E4%B8%83%E6%AD%A5%EF%BC%9AAnywhere">第七步：Anywhere</h2><p>用 Advanced URI 插件可以创建链接，打开链接就打开对应的笔记或者命令，或者什么什么的。</p>
<p>安装这个插件之后，<kbd class=key-ctrl>Ctrl</kbd> + <kbd class=key-p>P</kbd> 打开命令面板，输入 aduri 找到 <code>Advanced URI:copy URI for command</code> 这个命令，意思是复制特定命令的 URI，选择后会让你选择一个文件，就选择第一项：<code>&lt;Don&#39;t specify a file&gt;</code> 表示不特定哪个文件，反正你给我运行命令就是了；然后找到前面设定的那条 QuickAdd 命令，就是快速添加碎碎念那个，确定，得到一个类似下面的链接：</p>
<pre class="hljs md" lang="md"><span class="hljs-attribute">obsidian</span>://advanced-uri?vault=Notes&amp;commandid=quickadd%<span class="hljs-number">253</span>Achoice%<span class="hljs-number">253</span>A404c557d-d9f2-<span class="hljs-number">4</span>d1b-<span class="hljs-number">8</span>d4f-<span class="hljs-number">5</span>b0c115c4395</pre><p>尝试关掉 Obsidian，然后在浏览器中打开这个链接，于是，不光 Obsidian 被打开了，还弹出了碎碎念的输入框。我会在 uTools 里用“快捷命令”这款插件来调用这个链接，当然各种其他插件都可以，毕竟，这里需要的只是打开一个链接。</p>
<p>我还会在手机（Android）上用“快捷方式”或者“Anywhere~”来调用这个链接，实现在手机上的快速碎碎念。</p>
<p>如果多读一读 Advanced URI 的文档，并有一点编程基础的话，也可以实现在其他地方编辑完内容，一键发送进 Obsidian 中， 比如在 uTools 的输入框里碎碎念，然后快速发送过来。</p>
<h2 id="%E7%AC%AC%E5%85%AB%E6%AD%A5%EF%BC%9A%E4%B8%BE%E6%A0%97%E5%AD%90">第八步：举栗子</h2><p>uTools 安装“快捷命令”插件。再次提醒，上面给出那个链接随便一个网址收藏类插件都能解决，下面展示为什么我用这个插件。</p>
<p>uTools 中输入“新建快捷命令”，进入新建命令面板。</p>
<p>左侧：</p>
<ul>
<li>匹配类型：关键词</li><li>关键词：<code>Digu</code>，然后回车（这里可以根据你的爱好随便写）</li></ul>
<p>右侧粘贴如下代码，可能无法使用 <kbd class=key-ctrl>Ctrl</kbd> + <kbd class=key-v>V</kbd> 进行粘贴，右键然后选择 <code>Paste</code> 就行了。留意一下上方的环境为：<code>quickcommand</code> 。</p>
<pre class="hljs js" lang="js">const lengthNum = <span class="hljs-function">(<span class="hljs-params">num, <span class="hljs-built_in">length</span> = <span class="hljs-number">2</span></span>) =&gt;</span> String(num).padStart(<span class="hljs-built_in">length</span>, <span class="hljs-string">&#x27;0&#x27;</span>);
const <span class="hljs-built_in">now</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()
const <span class="hljs-built_in">year</span> = <span class="hljs-built_in">now</span>.getFullYear()
const <span class="hljs-built_in">month</span> = lengthNum(<span class="hljs-built_in">now</span>.getMonth() + <span class="hljs-number">1</span>)
const <span class="hljs-built_in">day</span> = lengthNum(<span class="hljs-built_in">now</span>.getDate())
const <span class="hljs-built_in">hour</span> = lengthNum(<span class="hljs-built_in">now</span>.getHours())
const <span class="hljs-built_in">minute</span> = lengthNum(<span class="hljs-built_in">now</span>.getMinutes())
const notePath = <span class="hljs-string">`Life/Logs/<span class="hljs-subst">${<span class="hljs-built_in">year</span>}</span>.md`</span>
const replaceMark = <span class="hljs-string">`## 碎碎念\\n\\n`</span>
const input = <span class="hljs-string">&#x27;{{subinput:DiguDigu}}&#x27;</span>.<span class="hljs-built_in">trim</span>()
<span class="hljs-keyword">if</span>(input) visit(<span class="hljs-string">`obsidian://advanced-uri?filepath=<span class="hljs-subst">${encodeURIComponent(notePath)}</span>&amp;searchregex=<span class="hljs-subst">${encodeURIComponent(encodeURIComponent(replaceMark))}</span>&amp;replace=<span class="hljs-subst">${encodeURIComponent(encodeURIComponent(<span class="hljs-string">`## 碎碎念

- <span class="hljs-subst">${input}</span> ➕ <span class="hljs-subst">${<span class="hljs-built_in">year</span>}</span>-<span class="hljs-subst">${<span class="hljs-built_in">month</span>}</span>-<span class="hljs-subst">${<span class="hljs-built_in">day</span>}</span> <span class="hljs-subst">${<span class="hljs-built_in">hour</span>}</span>:<span class="hljs-subst">${<span class="hljs-built_in">minute</span>}</span> ^Digu<span class="hljs-subst">${+<span class="hljs-built_in">now</span>}</span>
`</span>))}</span>`</span>)</pre><p>其中 <code>const notePath = </code> 后面照猫画虎改为自己的路径。保存。</p>
<p>然后在 uTools 中输入 <code>Digu</code>（你设定的关键词）回车，然后输入碎碎念的内容，再回车，不出意外就自动插入到你的碎碎念笔记中了。出意外……可能那个笔记就乱了，2333</p>
<p>这样就实现了在软件外先输入再启动软件进行保存，不过这个输入框也可能丢数据。</p>
</section>
    </article>
  </main>
  <aside>
    <div class="toggle"><i class="fa-solid fa-bars"></i></div>
    <div class="aside-content">
      <div class="nav">
        <ul>
          <li class="home"><a href="/"><i class="fa-solid fa-house"></i> Home</a></li>
          <li class="meow"><a href="https://afdian.net/a/daomishu" target="_blank"><i class="fa-solid fa-heart"></i> Meow~</a></li>
          <li class="gotop"><a href="#"><i class="fa-solid fa-plane-up"></i> Top</a></li>
        </ul>
      </div>
      <div class="toc"><ul><li data-hash="%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84" style="margin-left: 1.5em"><a href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">第一步：数据结构</a></li>
<li data-hash="%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E7%A1%AE%E5%AE%9A%E5%AD%98%E5%82%A8" style="margin-left: 1.5em"><a href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E7%A1%AE%E5%AE%9A%E5%AD%98%E5%82%A8">第二步：确定存储</a></li>
<li data-hash="%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E8%AE%BE%E7%BD%AE%20QuickAdd" style="margin-left: 1.5em"><a href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E8%AE%BE%E7%BD%AE%20QuickAdd">第三步：设置 QuickAdd</a></li>
<li data-hash="%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E4%BD%BF%E7%94%A8" style="margin-left: 1.5em"><a href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E4%BD%BF%E7%94%A8">第四步：使用</a></li>
<li data-hash="%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E5%B0%B1%E5%BE%AE%E5%8D%9A" style="margin-left: 1.5em"><a href="#%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E5%B0%B1%E5%BE%AE%E5%8D%9A">第五步：就微博</a></li>
<li data-hash="%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E6%9C%89%E6%8A%80%E5%B7%A7" style="margin-left: 1.5em"><a href="#%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E6%9C%89%E6%8A%80%E5%B7%A7">第六步：有技巧</a></li>
<li data-hash="%E7%AC%AC%E4%B8%83%E6%AD%A5%EF%BC%9AAnywhere" style="margin-left: 1.5em"><a href="#%E7%AC%AC%E4%B8%83%E6%AD%A5%EF%BC%9AAnywhere">第七步：Anywhere</a></li>
<li data-hash="%E7%AC%AC%E5%85%AB%E6%AD%A5%EF%BC%9A%E4%B8%BE%E6%A0%97%E5%AD%90" style="margin-left: 1.5em"><a href="#%E7%AC%AC%E5%85%AB%E6%AD%A5%EF%BC%9A%E4%B8%BE%E6%A0%97%E5%AD%90">第八步：举栗子</a></li></ul></div>
      <div class="meta"><small>created: 2023-11-23 17:39:27</small><br><small>updated: 2023-12-01 14:33:01</small></div>
    </div>
  </aside>
  <script src="script.js"></script>
  <script async
    src="https://state.zji.me/script.js"
    data-website-id="746d3aee-45c2-4dea-b72f-0cfb7891afe3"
    data-do-not-track="true"
    data-domains="zji.me"></script>
  <foot>©2022~2024 稻米鼠. Last build at 2024/1/21 00:00:53</foot>
</body>
</html>