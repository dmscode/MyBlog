<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="google-site-verification" content="" />
  <meta name="referrer" content="unsafe-url">
  
  <title>0021 历史上的今天-Templater</title>
  <meta name="author" content="稻米鼠">
  <meta name="description" content="效果展示
-538年10月17日 波斯的居鲁士大帝制定了第一部人权法法案
1505年10月17日 莫斯科大公伊凡三世逝世
1849年10月17日 波兰钢琴演奏家肖邦逝世
1892年10月17日 纳粹德国亲卫队上将西奥多·艾克出生
1904年10月17日 张伯苓创办天津南开中学
1907年10月17日 梁启超等人在东京发起成立政闻社
1908年10月17日 苏联国防部长乌斯季诺夫出生
1912年10月17日 罗马教宗若望·保禄一世出生
1915年10月17日 美国剧作家阿瑟·米勒出生
1919年10月17日 马德里地铁由国王阿方素十三世开幕
1938年10月17日 德国和国际工人运动理论家卡尔·考茨基逝世
1958年10月17日 中国歌手齐豫在台湾出生
1967年10月17日 中国最后一个皇帝爱新觉罗·溥仪逝世
1968年10月17日 日本作家川端康成获诺贝尔文学奖
2005年10月17日 现代文学家巴金先生逝世

用户脚本">
  
  
  <meta property="og:title" content="0021 历史上的今天-Templater"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:site_name" content="自己的自己"/>
  <link href="/apple-touch-icon-precomposed.png" sizes="180x180" rel="apple-touch-icon-precomposed">
  <link rel="alternate" href="/atom.xml" title="自己的自己" type="application/atom+xml">
  <link rel="stylesheet" href="/css/m.min.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <a id="top"></a>
  <div id="main">
    <div class="main-ctnr">
      <div class="behind">
  <a href="/" class="back black-color">
    <svg class="i-close" viewBox="0 0 32 32" width="22" height="22" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
        <path d="M2 30 L30 2 M30 30 L2 2"></path>
    </svg>
  </a>
  
    <div class="description">
      &nbsp;怎么办怎么办，老鼠是笨蛋！
    </div>
    
</div>


  <article class="standard post">
    <div class="title">
      
  
    <h1 class="page-title center">
        0021 历史上的今天-Templater
    </h1>
  


    </div>
    <div class="meta center">
      <time datetime="2022-10-18T07:47:31.000Z" itemprop="datePublished">
  <svg class="i-calendar" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
    <path d="M2 6 L2 30 30 30 30 6 Z M2 15 L30 15 M7 3 L7 9 M13 3 L13 9 M19 3 L19 9 M25 3 L25 9"></path>
  </svg>
  &nbsp;
  2022-10-18
</time>





    
    &nbsp;
    <svg class="i-tag" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
      <circle cx="24" cy="8" r="2"></circle>
      <path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path>
    </svg>
    &nbsp;
    <a href="/tags/Published/">Published</a>·<a href="/tags/Blog/">Blog</a>·<a href="/tags/Note-Obsidian/">Note/Obsidian</a>·<a href="/tags/Note-Note/">Note/Note</a>·<a href="/tags/Note-Article/">Note/Article</a>


    </div>
    <hr>
    
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA"><span class="toc-text">效果展示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%84%9A%E6%9C%AC"><span class="toc-text">用户脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF"><span class="toc-text">模板</span></a></li></ol>
    
    <div class="picture-container">
      
    </div>
    <h3 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h3><ul>
<li>-538年10月17日 波斯的居鲁士大帝制定了第一部人权法法案</li>
<li>1505年10月17日 莫斯科大公伊凡三世逝世</li>
<li>1849年10月17日 波兰钢琴演奏家肖邦逝世</li>
<li>1892年10月17日 纳粹德国亲卫队上将西奥多·艾克出生</li>
<li>1904年10月17日 张伯苓创办天津南开中学</li>
<li>1907年10月17日 梁启超等人在东京发起成立政闻社</li>
<li>1908年10月17日 苏联国防部长乌斯季诺夫出生</li>
<li>1912年10月17日 罗马教宗若望·保禄一世出生</li>
<li>1915年10月17日 美国剧作家阿瑟·米勒出生</li>
<li>1919年10月17日 马德里地铁由国王阿方素十三世开幕</li>
<li>1938年10月17日 德国和国际工人运动理论家卡尔·考茨基逝世</li>
<li>1958年10月17日 中国歌手齐豫在台湾出生</li>
<li>1967年10月17日 中国最后一个皇帝爱新觉罗·溥仪逝世</li>
<li>1968年10月17日 日本作家川端康成获诺贝尔文学奖</li>
<li>2005年10月17日 现代文学家巴金先生逝世</li>
</ul>
<h3 id="用户脚本"><a href="#用户脚本" class="headerlink" title="用户脚本"></a>用户脚本</h3><span id="more"></span>

<blockquote>
<p>Scritps&#x2F;get_today_history.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 代码过于简单，没啥好解说的</span></span><br><span class="line"><span class="comment"> * 网址是一个 Api，自己可以寻找类似的更换</span></span><br><span class="line"><span class="comment"> * 返回 JSON 格式数据的 Api 都可以套用这段代码</span></span><br><span class="line"><span class="comment"> * 此函数返回的是 markdown 格式的字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">get_today_history</span> () &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://api.oick.cn/lishi/api.php&quot;</span>)</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>()</span><br><span class="line">  <span class="keyword">let</span> result = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  data.<span class="property">result</span>.<span class="title function_">map</span>(<span class="function"><span class="params">e</span>=&gt;</span> result += <span class="string">&#x27;- &#x27;</span>+e.<span class="property">date</span>+<span class="string">&#x27; &#x27;</span>+e.<span class="property">title</span>+<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = get_today_history;</span><br></pre></td></tr></table></figure>

<h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><blockquote>
<p>Templater&#x2F;添加历史上的今天.md</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% tp.user.get_today_history() %&gt;</span><br></pre></td></tr></table></figure>

<p>无法使用动态模板，因为动态模板会把内容放在一行里显示。</p>
<p>有时候 Api 的数据中有特殊字符，导致 JSON 格式错乱，正常现象，过了这一天就好了。</p>


  </article>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <div class="busuanzi center">
    页阅读量:&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;・&nbsp;
    站访问量:&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;・&nbsp;
    站访客数:&nbsp;<span id="busuanzi_value_site_uv"></span>
  </div>


    





    </div>
  </div>
  <footer class="page-footer"><div class="clearfix">
</div>
<div class="right-foot">
    <div class="firstrow">
        <a href="#top" target="_self">
        <svg class="i-caret-right" viewBox="0 0 32 32" width="24" height="24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
            <path d="M10 30 L26 16 10 2 Z"></path>
        </svg>
        </a>
        © XXX 2019-2022
    </div>
    <div class="secondrow">
        <a target="_blank" rel="noopener" href="https://github.com/dmscode/">
        Github
        </a>
    </div>
</div>
<div class="clearfix">
</div>
</footer>
  <script type="text/javascript">

// disqus scripts


// dropdown scripts
function $(s) {
    return document.querySelector(s)
  }

  function $$(s) {
    return document.querySelectorAll(s)
  }
  var dropDownElArr = $$('.dropdown')
  for (var i = 0; i < dropDownElArr.length; i += 1) {
    dropDownElArr[i].addEventListener('click', function(event) {
      var content = this.querySelector('.dropdown-content')
      event.stopPropagation()
      if (content.className.indexOf('open') < 0) {
        content.classList.add('open')
      } else {
        content.classList.remove('open')
      }
    })
  }
  document.body.addEventListener('click', function() {
    var dropDownContentElArr = $$('.dropdown-content')
    for (var i = 0; i < dropDownContentElArr.length; i += 1) {
      dropDownContentElArr[i].classList.remove('open')
    }
  })

  // smooth scroll
  $$('a[href^="#"]').forEach(e=>{
    e.addEventListener("click", function(e) {
      e.preventDefault();
      var t = this.getAttribute("href").substr(1);
      $(`[id='${decodeURIComponent(t)}']`).scrollIntoView({
        behavior: "smooth"
      }),
      t === "top" ? history.replaceState(null, null, " ") : history.pushState(null, null, `#${t}`)
    })
  })

// search
var searchEl = document.querySelector("#local-search-input")
if (searchEl) searchEl.addEventListener('keydown', function(e) {
  if (e.key === 'Enter') {
    var s = e.target.value
    window.open('//www.google.com/search?q=site:https://zji.me%20' + s, '_blank').focus()
  }
})

</script>

</body>
</html>
